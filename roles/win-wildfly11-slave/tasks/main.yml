---
  - name: Copy Modified Configuration
    template:
      src: "{{playbook_dir}}/templates/wildfly/host-slave-11-0-0-Alpha1.xml"
      dest: "{{wildfly_install_dir}}/domain/configuration/host-slave.xml"

  - name: Install Slave Service
    win_command: "{{wildfly_install_dir}}\\bin\\service\\service.bat install /jbossuser {{wildfly_admin_user}} /jbosspass {{wildfly_admin_password}} /controller {{ansible_ip_addresses[0]}}:11990 /startup /name \"{{wildfly_slave_service}}\" /host /hostconfig host-slave.xml"

  - name: Start Slave Service
    win_service:
      name: "{{wildfly_slave_service}}"
      state: started
    ignore_errors: yes

  - name: Add WildFly Shortcut
    win_shortcut:
      src: '%PROGRAMFILES(x86)%\Google\Chrome\Application\chrome.exe'
      dest: '%PUBLIC%\Desktop\WildFly Slave.lnk'
      args: "--new-window http://{{ansible_ip_addresses[0]}}:10080/"
      directory: '%PROGRAMFILES(x86)%\Google\Chrome\Application'
      icon: '%PROGRAMFILES(x86)%\Google\Chrome\Application\chrome.exe,0'
